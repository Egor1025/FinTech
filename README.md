# Отчёт по проекту "FinTech"

## 1. Общая идея решения

В рамках проекта реализована доменная модель модуля «Учет финансов», включающая следующие ключевые компоненты:
- Реализованы функции создания, редактирования и удаления счетов, категорий и операций (доходов/расходов).
- Реализован подсчет разницы между доходами и расходами за указанный период, а также группировка операций по категориям.
- Предоставлена возможность экспорта всех данных в файлы CSV и JSON, а также их импорта из этих форматов.


## 2. Реализованные принципы

### SOLID:
- **Single Responsibility**
  - Каждый класс отвечает за свою узкую область:
    - *BankAccount* – операции со счетом,
    - *Category* – описание категории,
    - *Operation* – представление операции,
    - *FinanceManager* – управление объектами и аналитикой.
- **Dependency Inversion**
  - Высокоуровневые модули (например, команды) зависят от абстракций (интерфейс IFinanceManager), что упрощает замену реализации и тестирование.
- **Open/Closed**
  - Система легко расширяется за счёт добавления новых команд и функционала без изменения существующего кода.

### GRASP:
- **High Cohesion**
  - Каждый класс инкапсулирует связанную функциональность (например, FinanceManager управляет всеми операциями над данными).
- **Low Coupling**
  - Классы взаимодействуют через чётко определённые интерфейсы (например, IFinanceManager и ICommand), что облегчает сопровождение и модификацию системы.

## 3. Реализованные паттерны
- **Фасад** *FinanceManager* предоставляет единый интерфейс для управления всеми объектами и аналитикой, скрывая сложность внутренней реализации.
- **Фабрика** *DomainFactory* централизует создание объектов (BankAccount, Category, Operation), обеспечивая единообразие и валидацию при их создании.
- **Команда**. Для реализации сценариев взаимодействия с пользователем (создание, редактирование, удаление, импорт/экспорт, аналитика) используются отдельные классы-команды (например, CreateBankAccountCommand, RemoveCategoryCommand и т.д.), что упрощает расширение функционала и применение общих обработок ошибок.
- **Прокси** *FinanceManagerProxy* реализует кэширование данных (например, списка счетов) и обеспечивает низкую связанность между клиентским кодом и реальной логикой менеджера. Он реализует интерфейс IFinanceManager.
- **Шаблонный метод**. Классы *DataImporter* и *JsonDataImporter* демонстрируют паттерн шаблонного метода для импорта данных из JSON, где базовый алгоритм импорта определён в абстрактном классе, а конкретный парсинг реализован в наследнике.
- **Посетитель**. Реализован интерфейс IExportVisitor и конкретный посетитель *CsvExportVisitor* для экспорта данных объектов в CSV-формате. В доменных классах добавлены методы Accept, позволяющие «посетителю» обработать объект и собрать необходимые данные.
- **DI-контейнер** Microsoft.Extensions.DependencyInjection для регистрации и разрешения зависимостей (например, FinanceManager, команды).

## 4. Тестирование
Проект включает обширное покрытие юнит-тестами (66%), написанными с использованием xUnit. Тесты разделены на отдельные файлы:
- **BankAccountTests.cs:** проверка операций депозита и снятия, обработка ошибок.
- **CategoryTests.cs:** тестирование создания категорий.
- **OperationTests.cs:** проверка создания операций и валидации.
- **DomainFactoryTests.cs:** тестирование фабричных методов.
- **FinanceManagerTests.cs:** проверка добавления, удаления, аналитики, а также импорт/экспорт данных в CSV и JSON.
- **EditTests.cs:** Тестирование функционала редактирования счетов, категорий и операций напрямую через методы FinanceManager.
- **RemovalTests.cs:** тестирование удаления счетов, категорий и операций.
- **InvalidExportImportTests.cs:** проверка обработки некорректных входных данных для экспорта/импорта.
- **FinanceManagerProxyTests.cs:** проверка работы кэширования и сброса кэша в прокси.
- **JsonDataImporterTests.cs:** тестирование шаблонного метода импорта данных из JSON.
- **CsvExportVisitorTests.cs:** проверка реализации паттерна «Посетитель» для экспорта данных в CSV.
- **CommandsTests.cs:** тестирование работы команд для удаления объектов и команд редактирования с проверкой корректного обновления состояния объектов и изменения баланса (симуляция ввода/вывода).
- **AdditionalTests.cs:** тесты, покрывающие дополнительные сценарии, такие как суммирование нескольких операций, обработка отсутствия операций и корректная десериализация объектов с использованием JSON-конструкторов.

## 5. Инструкция по запуску приложения
1. **Сборка проекта:** откройте терминал в корневой папке проекта и выполните команду: dotnet build
2. **Запуск приложения:** dotnet run
3. **Запуск юнит-тестов:**
   - Создайте отдельный тестовый проект в решении (например, с шаблоном xUnit).
   - Добавьте ссылку на основной проект.
   - Запустите тесты через Test Explorer или командой: dotnet test